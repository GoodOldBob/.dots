# metakirby5's i3 config

## VARIABLES

# Theme
set $wallpapers         /usr/share/backgrounds/in_rotation/*
set $cFocusBG           #3FCFEE
set $cFocusFG           #FFFFFF
set $cFocusIN           #88DEF1
set $cSubFocusBG        #777777
set $cSubFocusFG        #CCCCCC
set $cSubFocusIN        #888888
set $cUnfocusBG         #444444
set $cUnfocusFG         #AAAAAA
set $cUnfocusIN         #555555
set $cUrgentBG          #C62828
set $cUrgentFG          #FFFFFF
set $cUrgentIN          #F44336
set $cBarBG             #2D2D2D
set $cBarFG             #DEDEDE
set $fontName           tewi
set $fontSize           8
set $border             7
set $gapsInner          50
set $gapsOuter          0

# Bar
set $barFontName        tewi
set $barFontSize        8
set $barSeparator       <

# dmenu
set $dmCounter          ~/.dmenu_counter.json
set $dmFontName         tewi
set $dmPrompt           λ
set $dmX                0
set $dmWidth            3200
set $dmY                1700
set $dmHeight           100

# Settings
set $dpi                276
set $termd              urxvt256cd
set $termc              urxvt256cc
set $volChangeSound     /usr/share/sounds/gnome/default/alerts/drip.ogg
set $volPct             5
set $brightPct          10

# Workspaces
set $wDash              1:★
set $w1                 11:one
set $w2                 12:two
set $w3                 13:three
set $w4                 14:four
set $w5                 15:five
set $w6                 16:six
set $w7                 17:seven
set $w8                 18:eight
set $w9                 19:nine
set $w10                20:ten

# Keys
set $mod                Mod4
set $mod2               Mod1
set $up                 k
set $down               j
set $left               h
set $right              l

# Shortcuts
set $nsi                --no-startup-id

## SESSION

# Autostart
exec $nsi xrandr --dpi $dpi
exec $nsi $termd -q -o -f
exec $nsi mpd

exec $nsi compton -bcCG -l -30 -t -30 -r 20
exec $nsi /usr/libexec/gnome-settings-daemon
exec $nsi gnome-screensaver
exec $nsi lightsOn
exec $nsi dunst

# exec $nsi nm-applet
exec $nsi xflux -z 92129
exec $nsi dropbox start
exec $nsi ibus-daemon -xdr
exec $nsi feh -zr --bg-fill $wallpapers

# Terminal on scratch
for_window [instance="^term_scratchpad$"] move scratchpad
bindsym $mod+equal [instance="^term_scratchpad$"] scratchpad show
# Wait for $termd to start
exec $nsi until pidof $termd;do :;done && $termc -name term_scratchpad

# Dash
# exec $nsi i3-msg 'workspace "$wDash"; append_layout ~/.i3/layouts/dash.json'
# exec $termc -e ncmpcpp
# exec firefox -P "i3"

# Start on workspace 1
exec $nsi i3-msg 'workspace "$w1"'

# Restart i3 to fix bugged cursor
exec $nsi sleep 1 && i3-msg 'restart'

## SETTINGS

font pango:$fontName $fontSize
floating_modifier $mod
focus_follows_mouse no

# Gaps
for_window [class="^.*"] border pixel $border
gaps inner $gapsInner
gaps outer $gapsOuter

# Colors
# class                 border        backgr.       text          indicator
client.focused          $cFocusBG     $cFocusBG     $cFocusFG     $cFocusIN
client.focused_inactive $cSubFocusBG  $cSubFocusBG  $cSubFocusFG  $cSubFocusIN
client.unfocused        $cUnfocusBG   $cUnfocusBG   $cUnfocusFG   $cUnfocusIN
client.urgent           $cUrgentBG    $cUrgentBG    $cUrgentFG    $cUrgentIN
client.placeholder      $cUnfocusBG   $cUnfocusBG   $cUnfocusFG   $cUnfocusIN

# Bar
# https://github.com/ivyl/i3-config/blob/master/conkyrc
# bindsym $mod+b bar hidden_state toggle
bar {
#   mode hide
#   hidden_state show
#   modifier $mod2
  tray_output none
  position top
  strip_workspace_numbers yes
  font pango:$barFontName $barFontSize
  separator_symbol "$barSeparator"
  status_command ~/.i3/bin/conky-wrapper
  colors {
    statusline $cBarFG
    background $cBarBG
    focused_workspace $cBarBG $cFocusBG $cFocusFG
    inactive_workspace $cBarBG $cUnfocusBG $cUnfocusFG
  }
}

## WINDOW RULES

# Popups
for_window [window_role="pop-up|task_dialog"] floating enable

## KEYS

# Tasks
bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+q kill
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Escape exec $nsi gnome-screensaver-command -l
bindsym $mod+Shift+Escape exit

# Executables
bindsym $mod+r exec $nsi j4-dmenu-desktop --term='$termc' --dmenu='dmenu_counter dmenu -i -p "$dmPrompt" -fn "$dmFontName" -nf "$cUnfocusFG" -nb "$cUnfocusBG" -sf "$cFocusFG" -sb "$cFocusBG" -x $dmX -w $dmWidth -y $dmY -h $dmHeight -counter $dmCounter'
bindsym $mod+t exec $nsi $termc
# Network manager
bindsym $mod+c exec $nsi $termc -e nmtui
# File browser - need to disable transparency for image previews
bindsym $mod+e exec $nsi $termc -depth 0 -e ranger
# Music player
bindsym $mod+m exec $nsi $termc -e ncmpcpp
# Display currently playing song
bindsym $mod+Shift+m exec $nsi ncmpcpp-notify

# Screenshots to clipboard
bindsym Print             exec $nsi escrotum -C
bindsym Shift+Print       exec $nsi escrotum -Cs

# Media controls
bindsym $mod+Home         exec $nsi mpc toggle
bindsym $mod+End          exec $nsi mpc stop
bindsym $mod+Page_Up      exec $nsi mpc prev
bindsym $mod+Page_Down    exec $nsi mpc next

# Volume controls
bindsym XF86AudioLowerVolume exec $nsi amixer set Master $volPct%- && ogg123 $volChangeSound
bindsym XF86AudioRaiseVolume exec $nsi amixer set Master $volPct%+ && ogg123 $volChangeSound
bindsym XF86AudioMute exec $nsi amixer set Master toggle && ogg123 $volChangeSound

# Screen brightness controls
bindsym XF86MonBrightnessUp exec $nsi xbacklight -inc $brightPct
bindsym XF86MonBrightnessDown exec $nsi xbacklight -dec $brightPct

# Change focus
bindsym $mod+backslash focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+z focus child

bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+minus scratchpad show

# Move focused window
bindsym $mod+Shift+backslash floating toggle

bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+minus move scratchpad

# Resize focused windows
bindsym $mod+Control+$left       resize shrink width 1 px or 1 ppt
bindsym $mod+Control+$down       resize grow height 1 px or 1 ppt
bindsym $mod+Control+$up         resize shrink height 1 px or 1 ppt
bindsym $mod+Control+$right      resize grow width 1 px or 1 ppt

# Gaps
bindsym $mod+g            gaps inner all plus   5
bindsym $mod+Shift+g      gaps inner all minus  5
bindsym $mod+Control+g    gaps inner all set    $gapsInner

# Change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+b layout toggle split

# Splits
bindsym $mod+n split h
bindsym $mod+v split v

# Switch to workspace
bindsym $mod+grave workspace        "$wDash"
bindsym $mod+1 workspace            "$w1"
bindsym $mod+2 workspace            "$w2"
bindsym $mod+3 workspace            "$w3"
bindsym $mod+4 workspace            "$w4"
bindsym $mod+5 workspace            "$w5"
bindsym $mod+6 workspace            "$w6"
bindsym $mod+7 workspace            "$w7"
bindsym $mod+8 workspace            "$w8"
bindsym $mod+9 workspace            "$w9"
bindsym $mod+0 workspace            "$w10"

# Move focused container to workspace
bindsym $mod+Shift+grave move container to workspace        "$wDash"
bindsym $mod+Shift+1 move container to workspace            "$w1"
bindsym $mod+Shift+2 move container to workspace            "$w2"
bindsym $mod+Shift+3 move container to workspace            "$w3"
bindsym $mod+Shift+4 move container to workspace            "$w4"
bindsym $mod+Shift+5 move container to workspace            "$w5"
bindsym $mod+Shift+6 move container to workspace            "$w6"
bindsym $mod+Shift+7 move container to workspace            "$w7"
bindsym $mod+Shift+8 move container to workspace            "$w8"
bindsym $mod+Shift+9 move container to workspace            "$w9"
bindsym $mod+Shift+0 move container to workspace            "$w10"

