#!/usr/bin/env bash
# Start my i3 session.

## VARIABLES

# Personal
ZIPCODE=92129

# System
DPI=276
XRESOURCES=$HOME/.Xresources

# Screensaver
SCREENSAVER=600
DPMS_STANDBY=720
DPMS_SUSPEND=840
DPMS_OFF=960

## AUTOSTART

# Gnome
/usr/libexec/gnome-settings-daemon &
/usr/libexec/polkit-gnome-authentication-agent-1 &

# Janky sleep to ensure gnome settings are overwritten
sleep 0.5

# Config
xrandr --dpi $DPI &
xrdb -merge "$XRESOURCES" &
xset dpms $DPMS_STANDBY $DPMS_SUSPEND $DPMS_OFF s $SCREENSAVER &

# Desktop
urxvt256cd -q -o -f &
mpd &
compton &
xautolock &
dunst &

# Scripts
running="$(ps aux)"
echo "$running" | grep lightsOn || lightsOn &
echo "$running" | grep mpc-notify-daemon || mpc-notify-daemon &

# User
xflux -z 92129 &
dropbox start &
ibus-daemon -xdr &

## LET'S DO THIS
i3

